---
description: Look into the data for delivery to understand the sequence of ETA system decisions, prep time estimates, and assignment decisions
globs:
alwaysApply: false
---
[dxlx_delivery_deepdive]
Common Table references
1. edw.finance.dimension_deliveries: schema can be found in @DATA-Dimension_Deliveries-030325-225951.pdf
2. edw.logistics.delivery_preptime_attributes: schema and common use cases can be found in @DATA-Delivery Prep Time Attributes - Data Guide-040325-110542.pdf
3. metrics_repo.public.eta_quality_prep_events: schema and description can be found in @eta_quality_prep_events.sql


Given a user-provided delivery_id and the identified problem (order being delivered late, order is never delievered etc.), analyze the prep time predictions, merchant reactions, and assignment flows and decision makings to understand where the problem is.

# Step 1: Analysis Setup
setup_instructions = """
When a user asks for help with delivery deepdive:
1. Ask for an delivery_id and create a new folder under user-analysis/delivery_deepdive/{delivery_id}
2. Create data and outputs subdirectories
"""

# Step 2: Data Collection
data_collection_instructions = """
To help the user collect data:
1. Assist in writing a load_data.py file with appropriate SQL
"""


# Step 3: Report Generation
report_instructions = """
For the final report:
1. Create a report.py that produces a markdown/PDF report with:
   - Summary section with author (Snowflake username)
   - Key findings section
   - Detailed analysis and timeline of events with visualizations
2. Save visualizations to the outputs directory
3. Generate the final report as report.pdf
"""





